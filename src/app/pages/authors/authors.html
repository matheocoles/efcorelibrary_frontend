<h1>
    <nz-space>
        <span>Gestion des auteurs</span>
        <nz-divider nzType="vertical"></nz-divider>
        <app-addauthors (authorAdded)="fetchAuthors()" />
    </nz-space>
</h1>

<nz-table
    #basicTable
    nzShowSizeChanger
    [nzData]="authors()"
    [nzFrontPagination]="true"
    [nzLoading]="authorsLoading()"
    [nzPageSize]="10"
>
    <thead>
    <tr>
        <th nzColumnKey="name" [nzSortFn]="true">Nom</th>
        <th nzColumnKey="firstName" [nzSortFn]="true">Pr√©nom</th>
        <th nzWidth="200px">Actions</th>
    </tr>
    </thead>
    <tbody>
    <!-- Utilisation de la syntaxe Control Flow (@for) -->
        @for (author of basicTable.data; track author.id) {
            <tr>
                <td>{{ author.name }}</td>
                <td>{{ author.firstName }}</td>
                <td>
                    <nz-flex nzGap="small">
                        <!-- Assure-toi que EditAuthors a aussi un Output pour recharger -->
                        <app-editauthors
                                [author]="author"
                                (authorEdited)="fetchAuthors()"
                        />
                        <button
                                nz-button
                                nzType="primary"
                                nzDanger
                                nzSize="small"
                                (click)="deleteAuthor(author.id!)"
                        >
                            <span nz-icon nzType="delete"></span>
                        </button>
                    </nz-flex>
                </td>
            </tr>
        }
    </tbody>
</nz-table>